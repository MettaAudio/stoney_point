<h1>Editing volunteer</h1>

<div class="row">
  <div class="span6">
    <%= render 'form' %>
  </div>
  <div class="span6">
    <%= simple_form_for(@volunteer, html: {class: 'form-inline' }, :url => add_volunteer_committee_path, method: 'post') do |f| %>
      <%= f.input :id, :as => :hidden, :input_html => { :value => @volunteer.id } %>
      <%= f.association :committees %>
      <%= f.button :submit, 'Update' %>
      <a href="#new_committee_modal" role="button" class="btn btn-mini" data-toggle="modal"><i class="icon-plus"></i> New Committee</a>
    <% end %>
  </div>
  <div class="span6">
    <%= simple_form_for(@volunteer, html: {class: 'form-inline' }, :url => add_volunteer_job_path, method: 'post') do |f| %>
      <%= f.input :id, :as => :hidden, :input_html => { :value => @volunteer.id } %>
      <%= f.association :jobs %>
      <%= f.button :submit, 'Update' %>
      <a href="#new_job_modal" role="button" class="btn btn-mini" data-toggle="modal"><i class="icon-plus"></i> New Job</a>
    <% end %>
  </div>
  <div class="span6">
    <%= simple_form_for(@volunteer, html: {class: 'form-inline' }, :url => add_volunteer_organization_path, method: 'post') do |f| %>
      <%= f.input :id, :as => :hidden, :input_html => { :value => @volunteer.id } %>
      <%= f.association :organization, :prompt => 'Choose One' %>
      <%= f.button :submit, 'Update' %>
      <a href="#new_organization_modal" role="button" class="btn btn-mini" data-toggle="modal"><i class="icon-plus"></i> New Organization</a>
    <% end %>
  </div>

  <div class="span6">
    <%= link_to('<i class="icon-user"></i> Add Spouse'.html_safe, duplicate_volunteer_path(:volunteer_id => @volunteer.id), method: :post, data: { confirm: 'Duplicate this volunteer?' }, :class => 'btn') %>
    <br>
    <br>
    <!-- Button to trigger modal -->
    <a href="#myModal" role="button" class="btn" data-toggle="modal"><i class="icon-home"></i> Add Housing</a>
  </div>

  <!-- Modal -->
  <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">Add Housing</h3>
    </div>
    <%= simple_form_for(@housing, html: {class: 'form-horizontal' }, :url => add_volunteer_housing_path, method: 'post') do |f| %>
      <div class="modal-body">
        <%= f.input :volunteer_id, :as => :hidden, :input_html => { :value => @volunteer.id } %>
        <%= render :partial => "housings/form", locals: {f: f} %>
      </div>
      <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <%= f.button :submit, class: 'btn btn-primary' %>
      </div>
    <% end %>
  </div>

  <!-- Modal -->
  <div id="new_job_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="add_job" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="add_committee">Add Job</h3>
    </div>
    <div class="modal-body">
      <%= render 'jobs/form' %>
    </div>
  </div>

  <!-- Modal -->
  <div id="new_organization_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="add_organization" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="add_organization">Add Organization</h3>
    </div>
    <div class="modal-body">
      <%= render 'organizations/form' %>
    </div>
  </div>

  <!-- Modal -->
  <div id="new_committee_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="add_committee" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="add_committee">Add Committee</h3>
    </div>
    <div class="modal-body">
      <%= render 'committees/form' %>
    </div>
  </div>

</div>

<%= link_to '<i class="icon-eye-open"></i>'.html_safe, @volunteer, :class => 'btn btn-small' %>
<%= link_to '<i class="icon-list"></i>'.html_safe, volunteers_path, :class => 'btn btn-small' %>
