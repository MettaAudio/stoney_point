<h1>Volunteers <small>Contact list</small></h1>
<%= link_to 'Add New Volunteer', new_volunteer_path if current_user %>
<hr>
<table id='volunteers_table' class ='table table-striped'>
  <thead>
    <tr>
      <th>Last</th>
      <th>First</th>
      <th>Organization</th>
      <th>Street Address</th>
      <th>Phone</th>
      <th>Email</th>
      <th>Committee(s)</th>
      <th></th>
      <% if current_user %>
        <th></th>
        <th></th>
      <% end %>
    </tr>
  </thead>

  <tbody>
    <% @volunteers.each do |volunteer| %>
      <tr>
        <td><%= link_to(volunteer.last_name, volunteer) %></td>
        <td><%= link_to(volunteer.first_name, volunteer) %></td>
        <td><%= volunteer.organization.try(:name) %></td>
        <td><%= volunteer.street %></td>
        <td><%= build_phone_number(volunteer.primary_phone) %></td>
        <td><%= mail_to volunteer.email, volunteer.email, :encode => "javascript" %></td>
        <td><%= committees_for(volunteer) %></td>
        <td><%= link_to '<i class="icon-eye-open"></i>'.html_safe, volunteer, :class => 'btn btn-small' %></td>
        <% if current_user %>
          <td><%= link_to '<i class="icon-pencil"></i>'.html_safe, edit_volunteer_path(volunteer), :class => 'btn btn-small' %></td>
          <td><%= link_to '<i class="icon-trash"></i>'.html_safe, volunteer, method: :delete, data: { confirm: 'Are you sure?' }, :class => 'btn btn-small' %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
<script>
  $(document).ready(function() {
    $('#volunteers_table').dataTable( {
      "iDisplayLength": 100
    });
  }
);
</script>