<h1>Volunteers <small>Contact list</small></h1>
<% if current_user %>
  <%= link_to 'Add New Volunteer', new_volunteer_path %>
  | <%= link_to 'Show all', :show_all => true %>
<% end %>
<hr>
<table id='data_table' class ='table table-striped'>
  <thead>
    <tr>
      <th>Last</th>
      <th>First</th>
      <th>Organization</th>
      <th>Street Address</th>
      <th>Phone</th>
      <th>Email</th>
      <th>Committee(s)</th>
      <th></th>
      <% if current_user %>
        <th></th>
        <th></th>
      <% end %>
    </tr>
  </thead>

  <tbody>
    <% @volunteers.each do |volunteer| %>
      <tr>
        <td><%= link_to(volunteer.last_name, volunteer.person) %></td>
        <td><%= link_to(volunteer.first_name, volunteer.person) %></td>
        <td><%= volunteer.organization.try(:name) %></td>
        <td><%= volunteer.street %></td>
        <td><%= build_phone_number(volunteer.phone) %></td>
        <td><%= mail_to volunteer.email, volunteer.email, :encode => "javascript" %></td>
        <td><%= committees_for(volunteer) %></td>
        <td><%= link_to '<span class="glyphicon glyphicon-eye-open"></span>'.html_safe, volunteer.person, :class => 'btn btn-small' %></td>
        <% if current_user %>
          <td><%= link_to '<span class="glyphicon glyphicon-pencil"></span>'.html_safe, edit_person_path(volunteer.person), :class => 'btn btn-small' %></td>
          <td><%= link_to '<span class="glyphicon glyphicon-trash"></span>'.html_safe, volunteer, method: :delete, data: { confirm: 'Are you sure?' }, :class => 'btn btn-small' %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
<%= render 'shared/datatable_js' %>